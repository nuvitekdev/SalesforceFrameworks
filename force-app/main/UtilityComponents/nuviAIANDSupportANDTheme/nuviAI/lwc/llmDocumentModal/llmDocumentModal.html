<template>
    <template if:true={showModal}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- Header -->
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                            title="Close"
                            onclick={handleCancel}>
                        <lightning-icon icon-name="utility:close"
                                        alternative-text="close"
                                        variant="inverse"
                                        size="small">
                        </lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-modal__title slds-hyphenate">{modalTitle}</h2>
                    <p if:true={modalDescription} class="slds-m-top_x-small">
                        {modalDescription}
                    </p>
                </header>

                <!-- Body -->
                <div class="slds-modal__content slds-p-horizontal_medium slds-p-vertical_small">
                    <template if:true={hasDocuments}>
                        <!-- Select All Option -->
                        <div class="slds-form-element slds-m-bottom_small">
                            <div class="slds-form-element__control">
                                <div class="slds-checkbox">
                                    <input type="checkbox"
                                           id="select-all"
                                           checked={selectAllChecked}
                                           onchange={handleSelectAll} />
                                    <label class="slds-checkbox__label" for="select-all">
                                        <span class="slds-checkbox_faux"></span>
                                        <span class="slds-form-element__label">
                                            <strong>Select All Documents</strong>
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <hr class="slds-m-vertical_small" />

                        <!-- Document List -->
                        <div class="document-list">
                            <template for:each={documentsWithSelection} for:item="doc">
                                <div key={doc.id} class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <div class="slds-checkbox">
                                            <input type="checkbox"
                                                   id={doc.id}
                                                   value={doc.id}
                                                   checked={doc.isSelected}
                                                   data-document-id={doc.id}
                                                   onchange={handleDocumentSelection} />
                                            <label class="slds-checkbox__label" for={doc.id}>
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">
                                                    <lightning-icon icon-name="doctype:pdf"
                                                                    size="x-small"
                                                                    class="slds-m-right_x-small">
                                                    </lightning-icon>
                                                    {doc.title}
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </template>

                    <template if:false={hasDocuments}>
                        <div class="slds-text-align_center slds-p-vertical_large">
                            <lightning-icon icon-name="utility:info"
                                            size="small"
                                            class="slds-m-bottom_small">
                            </lightning-icon>
                            <p>No documents available for selection</p>
                        </div>
                    </template>
                </div>

                <!-- Footer -->
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral"
                            onclick={handleCancel}>
                        Cancel
                    </button>
                    <button class="slds-button slds-button_brand"
                            onclick={handleConfirm}
                            disabled={isConfirmDisabled}>
                        Analyze Selected
                    </button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>