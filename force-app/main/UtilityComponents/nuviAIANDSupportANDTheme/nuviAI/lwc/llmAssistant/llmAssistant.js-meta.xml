<?xml version="1.0" encoding="UTF-8"?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <isExposed>true</isExposed>
    <masterLabel>AI Assistant</masterLabel>
    <description>LWC that provides AI assistant capabilities for any record</description>
    <targets>
        <target>lightning__RecordPage</target>
        <target>lightning__AppPage</target>
        <target>lightning__HomePage</target>
        <target>lightning__FlowScreen</target>
        <target>lightningCommunity__Page</target>
        <target>lightningCommunity__Default</target>
        <target>lightningCommunity__Page_Layout</target>
        <target>lightningCommunity__Theme_Layout</target>
    </targets>
    <targetConfigs>
        <targetConfig targets="lightning__RecordPage,lightning__AppPage,lightning__HomePage,lightningCommunity__Default">
            <property name="cardTitle" type="String" default="AI Assistant" label="Component Title" description="SETUP: Enter the title to display at the top of the AI Assistant card. This helps users understand the purpose of the assistant. Examples: 'AI Assistant', 'Sales Helper', 'HR Document Analyzer', 'Compliance Checker'. Default: 'AI Assistant'"/>
            <property name="primaryColor" type="String" default="#22BDC1" label="Primary Color" description="SETUP: The main color for the component's UI elements like buttons and headers. Use hex color format (#RRGGBB). This should match your org's branding. Example: '#1589EE' for Salesforce blue, '#22BDC1' for Nuvitek teal. Use online hex color pickers to find the right color. Default: '#22BDC1'"/>
            <property name="accentColor" type="String" default="#D5DF23" label="Accent Color" description="SETUP: The secondary color for highlights and hover effects. Use hex color format (#RRGGBB). This should complement your primary color. Example: '#FF6900' for orange, '#D5DF23' for Nuvitek green. The accent color appears on buttons when hovered. Default: '#D5DF23'"/>
            <property name="defaultModelName" type="String" label="Default AI Model" description="SETUP: Enter the DeveloperName of the AI model from your LLM_Configuration__mdt records. To find this: Setup > Custom Metadata Types > LLM Configuration > Manage Records. Copy the exact DeveloperName (e.g., 'GPT_4_Turbo', 'Claude_3_Sonnet'). Leave empty to let users choose their own model. This is useful when you want to standardize which AI model your team uses."/>
            <property name="hideModelSelector" type="Boolean" default="false" label="Hide Model Selector" description="SETUP: Check this box to hide the AI model dropdown from users. Use this when: 1) You've set a default model and don't want users to change it, 2) You want a simpler interface, 3) Your org has standardized on one AI provider. If unchecked, users can switch between different AI models. Default: unchecked (false)"/>
            <property name="contextPrompt" type="String" label="Assistant Context" description="SETUP: Provide context to make the AI assistant more helpful for your specific use case. This text is sent with every request to guide the AI's responses. Examples: 'You are helping sales reps on opportunity records. Focus on deal closing strategies and competitor analysis.' or 'You are an HR assistant helping review resumes. Focus on matching skills to job requirements.' or 'You are on a case record page. Help agents resolve customer issues quickly.' Leave empty for general-purpose assistance."/>
            <property name="enableAnomalyDetection" type="Boolean" default="false" label="Enable Anomaly Detection" description="SETUP: Check this box to automatically scan records for unusual patterns when the component loads. The AI will analyze the record and display a yellow banner if it finds: missing required data, unusual field combinations, data inconsistencies, suspicious patterns, or outdated information. Great for: quality control, data validation, fraud detection, error prevention. Example: On an Opportunity, it might detect 'Close date is tomorrow but last activity was 6 months ago'. Default: unchecked (false)"/>
            <property name="enableImageValidation" type="Boolean" default="false" label="Enable Image Analysis" description="SETUP: Check this box to allow users to analyze image files (JPG, PNG, GIF) attached to records. When enabled, an 'Analyze Images' button appears that can: extract text from images (OCR), analyze business cards for contact info, read receipts and invoices, understand diagrams and charts, verify ID documents. Requires: OpenAI with Vision API access. Use cases: HR scanning IDs, Finance processing receipts, Sales capturing business cards. Default: unchecked (false)"/>
            <property name="enableDocumentAnalysis" type="Boolean" default="false" label="Enable Document Analysis" description="SETUP: Check this box to enable PDF document analysis. When enabled, an 'Analyze Documents' button appears that can: extract text and data from PDFs, map extracted data to Salesforce fields, analyze contracts and agreements, process forms and applications. Works with 'Document Data Extraction Fields' setting. Example: Upload a signed contract PDF and extract the contract number, date, and amount. Max 3 PDFs at once for best performance. Default: unchecked (false)"/>
            <property name="enableComparison" type="Boolean" default="false" label="Enable Comparison" description="SETUP: Check this box to compare content against standards or requirements. Two modes: 1) MANUAL - If 'Compare From' is empty, shows a 'Compare to Standards' button for users to input content. 2) AUTOMATIC - If 'Compare From' has content, runs comparison immediately when component loads. Use cases: HR comparing resumes to job requirements, Procurement evaluating vendor proposals, Compliance checking documents against regulations. Must set 'Comparison Rules' for this to work. Default: unchecked (false)"/>
            <property name="comparisonRules" type="String" default="" label="Comparison Rules (TO)" description="SETUP: Define the standards/criteria to compare content against. Two formats: 1) JSON FORMAT for complex criteria: {'position':'Senior Dev','requirements':{'experience':'5+ years','skills':['Apex','LWC']}}. 2) TEXT FORMAT for simple rules: 'Must have 5 years experience\nBachelor degree required\nSalesforce certified'. The AI compares content against these rules and provides detailed analysis. Examples in README. TIP: Test with a simple text list first, then move to JSON for complex evaluations. Required when 'Enable Comparison' is checked."/>
            <property name="compareFrom" type="String" default="" label="Compare From (Source)" description="SETUP: Optional - The content to automatically compare against your rules. Three scenarios: 1) LEAVE EMPTY on a record page - automatically uses the current record's data for comparison. 2) LEAVE EMPTY on other pages - users click 'Compare to Standards' and paste content manually. 3) PROVIDE CONTENT for automatic comparison - set via Flow or formula field, comparison runs immediately. Example: In a Flow, set this to {!Resume_Text} variable. Or use a formula to pull in application text. When provided, results appear in a banner without user interaction. Perfect for automated screening workflows."/>
            <property name="relatedObjects" type="String" default="" label="Related Objects" description="SETUP: List the child objects to include when analyzing records. Format: Comma-separated API names without spaces. Example: 'Contact,Opportunity,Case,Task,Event'. The AI will analyze these related records for deeper insights. Tips: 1) Only include objects users have access to, 2) Start with 2-3 objects and add more if needed, 3) More objects = slower analysis. Common combos: Account page: 'Contact,Opportunity,Case'. Contact page: 'Case,Task,Event'. Leave empty to only analyze the main record."/>
            <property name="analysisFieldApiName" type="String" default="" label="Analysis Field API Name" description="SETUP: Enter the API name of a text field where AI analysis can be saved. Steps: 1) Create a Long Text Area field on your object (min 600 chars), 2) Copy the API name (e.g., 'AI_Analysis_Summary__c'), 3) Enter it here. When users click 'Analyze Record', they can save a summary to this field. The AI automatically creates a concise summary under 600 characters. Example fields: 'Deal_Analysis__c' on Opportunity, 'Account_Summary__c' on Account. Leave empty to disable saving."/>
            <property name="documentAnalysisFieldsApiNames" type="String" default="" label="Document Data Extraction Fields" description="SETUP: List fields to populate from document analysis. Format: Comma-separated API names. Example: 'Contract_Number__c,Contract_Date__c,Total_Amount__c,Vendor_Name__c'. When a user analyzes a PDF, the AI extracts data and suggests updating these fields. Process: 1) User uploads PDF, 2) Clicks 'Analyze Documents', 3) AI extracts matching data, 4) Shows suggestions in modal, 5) User approves updates. Common uses: Invoice processing, contract management, form automation. TIP: Start with 3-5 key fields. Make sure field types match expected data (date fields for dates, etc.)."/>
            <property name="questionInputLabel" type="String" default="Your Question" label="Question Input Label" description="SETUP: The label text that appears above the question input field. Customize this to match your use case. Examples: 'Your Question' (default), 'Enter your address' (for rep finder), 'Describe your issue' (for support), 'Your message' (for contact), 'Search query' (for search). This helps guide users on what type of input is expected."/>
            <property name="questionInputPlaceholder" type="String" default="Type your question here..." label="Question Input Placeholder" description="SETUP: The placeholder text that appears inside the question input field when empty. This provides additional guidance to users. Examples: 'Type your question here...' (default), 'Enter your street address, city, state' (for rep finder), 'Describe your concern or feedback...' (for support), 'What can I help you with today?' (for general assistance). Keep it helpful but concise."/>
            <property name="askButtonLabel" type="String" default="Ask Question" label="Ask Button Label" description="SETUP: The text displayed on the primary submit/ask button. Examples: 'Ask Question' (default), 'Submit Request', 'Find Representatives', 'Get Help', 'Analyze'. Customize to match your component's purpose."/>
            <property name="reportObjects" type="String" default="" label="Report Objects" description="SETUP: Enable reporting by listing object API names to query for analysis. Format: Comma-separated without spaces. Example: 'Account,Case,Contact,Opportunity'. The AI will query up to 10,000 records from each object to answer questions like 'How many Cases have RecordType Constituent?' or 'Show me Accounts created this month'. Security: Only objects the user has access to will be queried. Performance: Start with 1-2 objects, add more as needed. Leave empty to disable reporting features."/>
            <property name="enableGenerateReport" type="Boolean" default="false" label="Enable Generate Report Button" description="SETUP: Check this box to show the 'Generate Report' button that allows users to create data analysis reports based on the configured Report Objects. When enabled, users can generate comprehensive reports and visualizations from Salesforce data. Uncheck to hide the button if you want to disable report generation features. This works with the 'Report Objects' setting - if Report Objects is empty, the button will be hidden regardless of this setting. Default: unchecked (false)"/>
        </targetConfig>
        <targetConfig targets="lightning__FlowScreen">
            <property name="cardTitle" type="String" default="AI Assistant" label="Component Title" description="FLOW SETUP: Enter the title to display at the top of the AI Assistant card in your Flow screen. This helps users understand the AI's purpose in the flow process. Examples: 'Application Reviewer', 'Document Validator', 'Content Generator'. Can use merge fields like 'Review {!Account.Name}'. Default: 'AI Assistant'"/>
            <property name="primaryColor" type="String" default="#22BDC1" label="Primary Color" description="FLOW SETUP: The main color for buttons and headers in hex format (#RRGGBB). Match your org's branding or flow theme. Example: '#1589EE' for Salesforce blue. Can use flow variables like {!varPrimaryColor} for dynamic theming. Default: '#22BDC1'"/>
            <property name="accentColor" type="String" default="#D5DF23" label="Accent Color" description="FLOW SETUP: The secondary color for highlights in hex format (#RRGGBB). Should complement the primary color. Example: '#FF6900' for orange accents. Can use flow variables like {!varAccentColor}. Default: '#D5DF23'"/>
            <property name="defaultModelName" type="String" label="Default AI Model" description="FLOW SETUP: Enter the DeveloperName from LLM_Configuration__mdt (Setup > Custom Metadata Types > LLM Configuration). Examples: 'GPT_4_Turbo', 'Claude_3_Sonnet'. Can use flow variable {!varSelectedModel} to let previous screens determine the model. Leave empty for user selection."/>
            <property name="hideModelSelector" type="Boolean" default="false" label="Hide Model Selector" description="FLOW SETUP: Check to hide the AI model dropdown. Useful when: 1) Model is pre-selected by flow logic, 2) Simplifying user interface, 3) Enforcing specific models for certain processes. Can use formula like {!varUserProfile = 'Basic User'} to conditionally hide. Default: unchecked"/>
            <property name="contextPrompt" type="String" label="Assistant Context" description="FLOW SETUP: Provide context about the flow step. This guides AI responses. Examples: 'You are reviewing a grant application in step 3 of 5. Focus on budget completeness.' or 'Help generate a proposal summary based on: Product: {!varProductName}, Customer: {!Account.Name}'. Use flow variables to make context dynamic. Very important for accurate AI assistance."/>
            <property name="recordId" type="String" label="Record ID" description="FLOW SETUP: The Salesforce record ID to analyze. Usually {!recordId} for record-triggered flows. For screen flows: use {!varRecordId} from previous elements. Required for record analysis features. Without this, the AI won't have access to record data, related records, or attachments."/>
            <property name="conversationOutput" type="String" label="Conversation Output" description="FLOW SETUP: Variable to store the AI conversation for later use. Create a text variable (e.g., varAIConversation) and reference it here as {!varAIConversation}. Use cases: 1) Save to activity record, 2) Email conversation summary, 3) Pass to next flow screen, 4) Store in case comments. The output includes timestamps and full conversation history."/>
            <property name="enableAnomalyDetection" type="Boolean" default="false" label="Enable Anomaly Detection" description="FLOW SETUP: Check to scan for data issues. In flows, useful for: validation before approval, quality checks in data entry, flagging records that need review. Can use formula like {!varRecordValue > 100000} to enable for high-value records only. Alerts appear as yellow banners. Default: unchecked"/>
            <property name="enableImageValidation" type="Boolean" default="false" label="Enable Image Analysis" description="FLOW SETUP: Check to analyze images (JPG, PNG, GIF). Perfect for flows that: process uploaded IDs or documents, verify receipt submissions, extract business card data, validate uploaded proof. Requires OpenAI Vision. Example: Employee onboarding flow analyzing uploaded ID cards. Default: unchecked"/>
            <property name="enableDocumentAnalysis" type="Boolean" default="false" label="Enable Document Analysis" description="FLOW SETUP: Check to analyze PDFs. Essential for flows that: process contracts or agreements, extract invoice data, review uploaded applications, validate form submissions. Works with document extraction fields. Example: Invoice approval flow extracting amounts and dates. Max 3 PDFs. Default: unchecked"/>
            <property name="enableComparison" type="Boolean" default="false" label="Enable Comparison" description="FLOW SETUP: Check to compare content against standards. Two modes in flows: 1) MANUAL - User inputs content to compare, 2) AUTOMATIC - Uses 'Compare From' variable. Perfect for: application screening, proposal evaluation, compliance checking. Must set 'Comparison Rules'. Can enable conditionally with {!varRequiresReview}. Default: unchecked"/>
            <property name="comparisonRules" type="String" default="" label="Comparison Rules (TO)" description="FLOW SETUP: Standards to compare against. Can hardcode or use variables. Format 1) JSON: {!varJobRequirementsJSON} from custom metadata. Format 2) TEXT: 'Requirements:\n' + {!varRequirement1} + '\n' + {!varRequirement2}. Build dynamically with flow logic. Example: Loop through criteria records to build rules. Required when comparison is enabled."/>
            <property name="compareFrom" type="String" default="" label="Compare From (Source)" description="FLOW SETUP: Content to auto-compare. Common sources: {!varUploadedResumeText} from file processing, {!varApplicationResponses} from form screens, {!Account.Description} from record fields, {!varCombinedText} from text templates. If provided, comparison runs automatically. Leave empty for manual input. Perfect for automated screening."/>
            <property name="documentAnalysisFieldsApiNames" type="String" default="" label="Document Data Extraction Fields" description="FLOW SETUP: Fields to populate from PDFs. Format: 'Contract_Number__c,Amount__c,Start_Date__c'. In flows: 1) Extract to variables first using this, 2) Use assignment element to update record, 3) Show extracted data for review. Can build dynamically: {!varFieldList} from custom settings. Enables automated data entry from documents."/>
            <property name="questionInputLabel" type="String" default="Your Question" label="Question Input Label" description="FLOW SETUP: Label for the question input field. Customize for your flow context. Examples: 'Your Question' (default), 'Enter application details' (for approval flow), 'Describe the issue' (for support flow), 'Your feedback' (for review flow). Can use flow variables like {!varStepTitle} for dynamic labels based on flow logic."/>
            <property name="questionInputPlaceholder" type="String" default="Type your question here..." label="Question Input Placeholder" description="FLOW SETUP: Placeholder text inside the question input field. Guide users on expected input. Examples: 'Type your question here...' (default), 'Paste resume text or job description...' (for screening), 'Describe what happened in detail...' (for incident), 'Enter contract terms to review...' (for legal). Can reference flow variables: 'Enter details about {!Case.Subject}' for context-specific guidance."/>
            <property name="askButtonLabel" type="String" default="Ask Question" label="Ask Button Label" description="FLOW SETUP: Text for the primary action button. Match your flow's purpose. Examples: 'Ask Question' (default), 'Submit Application', 'Get Recommendation', 'Continue', 'Analyze Data'. Can use flow variables like {!varButtonText} for dynamic text based on flow logic or user selections."/>
            <property name="reportObjects" type="String" default="" label="Report Objects" description="FLOW SETUP: Enable reporting by listing object API names to query for analysis. Format: Comma-separated without spaces. Example: 'Account,Case,Contact,Opportunity'. In flows, perfect for: application review dashboards, data summary screens, automated reporting. The AI queries up to 10,000 records per object to answer questions like 'How many Cases are open?' or 'Show Accounts created in the last 30 days'. Can use flow variables: {!varObjectsToAnalyze} for dynamic object selection. Security: Only accessible objects are queried. Leave empty to disable."/>
            <property name="enableGenerateReport" type="Boolean" default="false" label="Enable Generate Report Button" description="FLOW SETUP: Check this box to show the 'Generate Report' button in your Flow screen. When enabled, users can create data analysis reports from Salesforce objects during the flow process. Perfect for: application review summaries, data validation reports, automated analysis screens. Can use flow formula like {!varUserRole = 'Manager'} to conditionally show the button. Works with 'Report Objects' setting - if Report Objects is empty, button won't appear. Default: unchecked (false)"/>
        </targetConfig>
    </targetConfigs>
</LightningComponentBundle>